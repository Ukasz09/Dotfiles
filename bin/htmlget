#!/bin/bash

HOME=$(eval echo ~${SUDO_USER})
DOWNLOAD_LOCALIZATION="${HOME}/Dokumenty/Websites"

get_domain(){
    echo $(echo "${1}" | cut -d "/" -f3)
}

download_sites(){
    for i in $@; do
        SITE="${i}"
        DOMAIN=$(get_domain ${SITE})
        mkdir -p "${DOMAIN}"
        cd "${DOMAIN}"
        
        wget \
        --recursive \
        --page-requisites \
        --adjust-extension \
        --span-hosts \
        --convert-links \
        --restrict-file-names=windows \
        --domains ${DOMAIN} \
        --no-parent \
        ${SITE}

        cd ..
    done
}

cd ${DOWNLOAD_LOCALIZATION}
download_sites $@
